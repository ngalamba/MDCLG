                                                    
                                                    


                                         ------------------------------
                                         INSTRUCTIONS OF THE CODE MDCLG
                                         ------------------------------
  
                 ..............................................................................
                 .                                                                            .
                 . MDCLG - Molecular Dynamics of CLusters using Gaussian 03                   .      
                 .                                                                            .
                 . Author: Nuno Galamba, Grupo de Física-Matematica da Universidade de Lisboa .
                 .                                                                            .
                 . Date: November of 2005                                                     .
                 .                                                                            .
                 . Version: 1.0                                                               .
                 .                                                                            .
                 ..............................................................................

 

   1. OBJECTIVE
   ------------

   MDCLG.F  IS  A  FORTRAN  77  CODE  BUILT  TO  PERFORM  (N,V,E)  MOLECULAR  DYNAMICS  WITH Ab-Initio FORCES.                
   THIS  TYPE  OF  DYNAMICS  IS  COMMONLY  CALLED  BORN-OPPENHEIMER  MOLECULAR  DYNAMICS  AND DIFFERS FROM THE              
   HELLMANN-FYNMANN MOLECULAR DYNAMICS METHOD IN THAT LOCAL BASIS SETS ARE USED INSTEAD OF PLANE-WAVES USED IN     
   THE LATER. THE FORCES ARE CALCULATED WITH Gaussian USING ANY METHOD AVAILABLE IN THE PROGRAM - Gaussian 03.
   THE PROGRAM CAN SIMULATE ANY NUMBER OF COMPONENTS AND ANY MOLECULE GIVEN AN INITIAL CONFIGURATION AND A SET
   OF  ATOMIC  VELOCITIES.  THE  SYSTEM  OF  UNITS USED IN THE PROGRAM IS THE ATOMIC UNIT SYSTEM ALTHOUGH SOME
   VARIABLES ARE ASKED IN THE INTERNATIONAL SYSTEM OF UNITS. FOR THOSE INTERNAL CONVERSIONS ARE PERFORMED. THE              
   TWO PROGRAMS [Gaussian 03 AND MDCLG] ARE COUPLED THROUGH A BASH SCRIPT CALLED script_mdclg.sh.      

   
   MDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMD
  
    
   2. THE CODE
   -----------
   
   MDCLG  STARTS  RUNNING  AFTER  ONE FIRST CALCULATION OF THE FORCES AND SCF ENERGY WITH Gaussian 03 FOR SOME        
   INITIAL  CONFIGURATION.  THE  PROGRAM  READS  THE  Ab-Initio  FORCES  FROM  Gaussian 03 AND THE SAME SET OF    
   POSITIONS  USED  IN  THE  INPUT OF Gaussian 03. IN ADDITION A SET OF ATOMIC VELOCITIES DEFINED RANDOMLY AND         
   SCALED  TO  INSURE  A  ZERO  TOTAL  LINEAR  MOMENTUM AND A SPECIFIC TEMPERATURE IS READ. MDCLG ADVANCES THE   
   ATOMIC  POSITIONS AND  VELOCITIES  WITH  A  VERLET  "LEAP-FROG"  ALGORITHM  AND WRITES A NEW INPUT FILE FOR    
   Gaussian  03  TO  CALCULATE A NEW SET OF FORCES FOR THE NEW CONFIGURATION. THIS PROCESS IS ITERATED AND THE    
   PROGRAM  MDCLG  DIVIDES  IT  INTO  AN  EQUILIBRATION STAGE AND A PRODUCTION STAGE. THE NUMBER OF TIME-STEPS    
   FOR  EQUILIBRATION  IS  DEFINED IN THE INPUT FILE OF MDCLG AND THE TOTAL NUMBER OF STEPS (EQUILIBRATION AND  
   PRODUCTION)  IS  DEFINED  IN THE SCRIPT. THE TWO STAGES OF THE RUN DIFFER ONLY IN THAT DURING EQUILIBRATION        
   THE  VELOCITIES ARE SCALED FOR A DESIRED TEMPERATURE. ALTHOUGH IT IS NOT NEEDED TO CARRY SEPARATED RUNS FOR         
   EQUILIBRATION  AND  PRODUCTION IT IS POSSIBLE TO RUN ONLY THE PRODUCTION STAGE IF THE INITIAL CONFIGURATION  
   IS  AN  EQUILIBRATED  ONE  BY  TURNING  OFF  TEMPERATURE SCALING  AND  SETTING  THE NUMBER OF EQUILIBRATION  
   TIME-STEPS EQUAL TO ZERO.                
   
   
   MDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMD
   
   
   3. RUNNING THE CODE
   -------------------
   
   TO START RUNNING Gaussian 03 AND MDCLG IN CONJUNCTION, THE FOLLOWING 5 FILES ARE NEEDED:

..............................................................................................................

   NOTE: THE FIRST THREE INPUT FILES, i.e., gaussr.com, MDPOST.DAT AND MDVELT.DAT CAN BE GENERATED BY THE CODE
   ****  MDCLG  IF NECESSARY. FOR THIS PURPOSE THE USER MUST SET THE VARIABLE START=0 IN THE BASH SCRIPT. THIS
         IS DESCRIBED IN THE BASH SCRIPT script_mdclg.sh, IN ADDITION TO OTHER TWO VARIABLES NEEDED BEFORE ANY
         SIMULATION  CAN  START. FURTHERMORE THE FILE mdcontrl.dat MUST HAVE THE APPROPRIATE DEFINITION OF THE
         LOGICAL VARIABLES LPOST AND LVEL, i.e., LPOST T AND LVEL T; see below. 

..............................................................................................................   
   
   gaussr.com - FILE  WITH  THE  INITIAL  CONFIGURATION  (CARTESIAN  COORDINATES) FOR Gaussian 03 AND A SET OF 
   «»«»«»«»«»   OPTIONS TO RUN Gaussian 03.

                e.g., NaCl

               .......................................................................
                %Mem=200MB
                %Chk=NaCl_8.chk
               #p hf/sto-3g force  gfprint pop=full NoSymm units=au
  
               NaCl_8  fcc
  
               0  1
                  17  -3.09598241083641       -3.09598241083641       -3.09598241083641     
                  17  -3.09598241083641        3.09598241083641        3.09598241083641     
                  17   3.09598241083641       -3.09598241083641        3.09598241083641     
                  17   3.09598241083641        3.09598241083641       -3.09598241083641  
                  11   3.09598241083641        3.09598241083641        3.09598241083641     
                  11  -3.09598241083641       -3.09598241083641        3.09598241083641     
                  11  -3.09598241083641        3.09598241083641       -3.09598241083641     
                  11   3.09598241083641       -3.09598241083641       -3.09598241083641
               ........................................................................
                
                
   MDPOST.DAT - FILE  WITH  THE  INITIAL  CONFIGURATION  (CARTESIAN  COORDINATES) FOR MDCLG             
   «»«»«»«»«»             
                
                e.g., NaCl 
                
               ..................................................................
                     X(Bohr)                 Y(Bohr)                 Z(Bohr) 
                -3.09598241083641       -3.09598241083641       -3.09598241083641     
                -3.09598241083641        3.09598241083641        3.09598241083641     
                 3.09598241083641       -3.09598241083641        3.09598241083641     
                 3.09598241083641        3.09598241083641       -3.09598241083641  
                 3.09598241083641        3.09598241083641        3.09598241083641     
                -3.09598241083641       -3.09598241083641        3.09598241083641     
                -3.09598241083641        3.09598241083641       -3.09598241083641     
                 3.09598241083641       -3.09598241083641       -3.09598241083641
               ..................................................................
                 
   MDVELT.DAT - FILE  WITH  THE  INITIAL  VELOCITIES FOR MDCLG 
   «»«»«»«»«» 
    
                e.g., NaCl

               ......................................................................
                   X1(Bohr/aut)            Y1(Bohr/aut)            Z1(Bohr/aut)
               1.779334388343955E-005 -3.254121006159001E-004  3.640639575272230E-004  
               4.442501143253636E-004 -3.010773205364647E-004 -3.029034581785151E-004
               2.579184876806488E-004  3.263677408627388E-004 -7.730226666439311E-006
              -6.597967548121183E-005  3.456233700400636E-004  3.041041077049561E-004                                                                      
              -3.272561667933915E-004 -2.023000442246840E-004  3.360237583104460E-004  
              -3.830008624215969E-004  5.656841759028310E-005 -1.139942530838443E-004  
               1.691395309089671E-004 -1.439344119337945E-005 -4.436986093874650E-004  
              -4.673935584858566E-004  8.995656434926252E-005 -3.296873960370139E-004  
               ......................................................................
   
   mdcontrl.dat - FILE USED BY MDCLG TO COUNT THE NUMBER OF STEPS OF THE SIMULATION, CONTROL THE INPUT ECHO TO
   «»«»«»«»«»«»   THE OUTPUT FILE MDOUTPUT.DAT, THE START MODE OF THE SIMULATION, i.e., FROM OLD POSITIONS AND
                  VELOCITIES  OR  GENERATE  POSITIONS  AND  VELOCITIES  FOR  THE  FIRST  TIME  AND CONTROL THE 
                  CUMULATIVE AVERAGES OF ENERGY TERMS.

               FOR  A  BORN-OPPENHEIMER  MD  SIMULATION  THIS FILE SHOUD LOOK LIKE THIS [IF WE DO NOT HAVE THE 
               FOLLOWING FILES: MDPOST.DAT, gaussr.com AND MDVELT.DAT]:
               
               ........... 
               T 1 0                                      # [LPRNT = .TRUE.] AND [NSTEP=1] AND [MDSTEP=0]
               T                                          # [LPOST = .TRUE.]
               T                                          # [LVEL  = .TRUE.]
               0.0D0 0.0D0                                # [Sum(Nuclear kinetic energy)]AND [Sum(SCF energy)]  
               ...........                                          

               THE FIRST TIME MDCLG RUNS IT WILL SUBSTITUTE THESE LINES BY:

               F 2 1
               F
               F 
               Sum(Nuclear kinetic energy) AND Sum(SCF energy) after 1 MD step

               THE  LOGICAL VARIABLES LPRNT, LPOST AND LVEL WILL STAY .FALSE. UNTILL THE END OF THE SIMULATION   
               AND AND THE TIME-STEP COUNTERS WILL INCREASE, i.e.,
               
               F 3 2
               F
               F
               Sum(Nuclear kinetic energy) AND Sum(SCF energy) after 2 MD steps

               F ...
               F
               F
               Sum(Nuclear kinetic energy) AND Sum(SCF energy) after ... MD steps

               F MAXEQB MAXEQB-1
               F
               F
               0.0D0 0.0D0 at the end of EQUILIBRATION
               .
               .
               .
               F MAX MAX-MAXEQB
               F
               F
               Sum(Nuclear kinetic energy) AND Sum(SCF energy) after MAX MD steps

   MDINPUT.DAT - MAIN  INPUT  FILE OF THE PROGRAM MDCLG - IT CONTAINS ALL THE INFORMATION ABOUT THE SIMULATION
   «»«»«»«»«»    OPTIONS AND THE SYSTEM TO BE SIMULATED
 
                 A full description of the MDINPUT.DAT is given inside the example files               

..............................................................................................................

   NOTE: INPUT FILES FOR DIFFERENT SYSTEMS ARE GIVEN IN THE DIRECTORY MD_input_Examples
   ****
..............................................................................................................


   MDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMD

   
   4. ABOUT THE SCRIPT
   -------------------
   
   THERE ARE ONLY 4 INPUT OPTIONS TO BE DEFINED BEFORE EACH RUN IN THE BASH SCRIPT scrpt_mdclg.sh 
   THESE ARE THE FOLLOWING:
   
   ATTENTION!!! NO SPACES ARE ALLOWED IN THE DEFINITION OF VARIABLES [e.g., cluster = NaCl is wrong]
                                                                     [e.g., cluster=NaCl is 0k     ]
   cluster=?       # Name of your cluster system, e.g., NaCl_8
   start=?         # if 0 generate initial positions and velocities
                   # if 1 start from old configuration
   natoms=?        # Number of atoms - total number, i.e., sum of atoms of all the molecules of all components
   max=?           # Number of steps for the simulation - total number, i.e., equilibration and production
   
   A full description of the script is given inside the script
 
   
   MDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMD
     
   
   5. RUNNING THE SCRIPT 
   ---------------------              
   
   TYPE: ./scrpt_mdclg.sh IN A SHELL
 
   
   MDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMDCLGMD
    
    
   6. SUMMARY 
   ----------
   
   ___________________________________________________________________________________________________________
   TO RUN A SIMULATION YOU NEED THE FOLLOWING FILES:
   ................................................
   
   {gaussr.com; MDPOST.DAT; MDVELT.DAT} INPUT FILES THAT CAN BE GENERATED BY THE PROGRAM MDCLG OR USE OLD ONES 
   
   {mdcontrl.dat; MDINPUT.DAT} INPUT FILES THAT MUST BE GENERATED BY THE USER FOR A SPECIFIC SIMULATION 
   
   THE OUTPUT OF A SIMULATION IS WRITTEN IN THE FILE:
   .................................................
   
   {MDOUTPUT.DAT}  
   ____________________________________________________________________________________________________________
   
   Nuno Galamba
   Grupo de Física Matemática da Universidade de Lisboa
   Novembro de 2005               